var salesTools=angular.module("SalesTools",["ngRoute","ngResource","ui.bootstrap"]);salesTools.config(function(t){t.when("/",{templateUrl:"/templates/activities",controller:"activitiesController"})}),salesTools.factory("Activities",function(t){var o=t("api/activities/:id",{id:"@_id"});return{model:o,items:o.query()}}),salesTools.controller("activitiesController",function(t,o,e){t.activities=e.items,t.item={},t.logActivity=function(){var t=new e.model(this.activity);t.$save(function(){o.update()})}}),salesTools.factory("todayFactory",function(t){var o={};return o.today=null,o.goal=0,o.todaysTotal=0,o.update=function(){t.get("/api/todaysStuff").success(function(t){o.today=t,o.goal=t.goal,o.todaysTotal=t.loggedItems.filter(function(t){return t.legit}).reduce(function(t,o){return t+o.points},0),o.valueProgress=Math.floor(o.todaysTotal/o.goal*100)})},o.update(),o}),salesTools.directive("goalprogress",function(){return{restrict:"E",templateUrl:"/templates/progressBar",controller:function(t,o){t.today=o}}}),salesTools.directive("todaysstuff",function(){return{restrict:"E",templateUrl:"/templates/todaysStuff",controller:function(t,o,e){t.today=o,t.isCollapsed=!1,t.updateActivity=function(){e.put("/api/updateActivity/",{id:this.log._id}).success(function(){o.update()})}}}});